%% LaTeX Beamer presentation template (requires beamer package)
%% see http://bitbucket.org/rivanvx/beamer/wiki/Home
%% idea contributed by H. Turgut Uyar
%% template based on a template by Till Tantau
%% this template is still evolving - it might differ in future releases!


\documentclass{diapo}

% Change the red coloring by main color coloring
\renewcommand{\red}[1]{\textcolor{\maincolor}{#1}}
\renewcommand\Ccancel[2][\maincolor]{\renewcommand\CancelColor{\color{#1}}\xcancel{#2}}
\newcommand{\bulletplus}{\textcolor{\maincolor}{\textcircled{+}}}
\newcommand{\bulletminus}{\textcolor{\secondcolor}{\textcircled{--}}}
\graphicspath{{images/}}

\setbeamersize{text margin left = 0pt}
\setbeamersize{text margin right = 0pt}


% Picture graphic
\newcommand\DrawCloud[3][black]{
  % Average
  \addplot[mark=*, mark options ={fill=#1,xscale=2.,yscale=2.}, draw=#1, only marks]
    table[x=AVG_#3_fill_rate_service_level, y=AVG_#3_holding_cost] {#2};
  % Cloud
  \addplot[forget plot, mark=*, mark options ={fill=#1,xscale=.5,yscale=.5}, draw=#1, only marks]
        table[x=#3_fill_rate_service_level, y=#3_holding_cost] {#2};
}


\newcommand\DrawMix[3][black]{
  \addplot[mark=none,mark options ={fill=#1}, draw=#1, smooth]
      table[x=#3_fill_rate_service_level, y=#3_holding_cost] {#2};
}



\begin{document}

\coverframe{Balancing Cost and Flexibility in Supply Chain}
{Etienne de Saint Germain, PhD Defense}
{December 17th, 2018}
{Directed by Frédéric Meunier and Vincent Leclère}



%\section{Business context (production)} 


\begin{myframe}[Supply Chain issues (3')]



\mytext[4.5,4.5][stock]{\blockwidth}{anchor = north}{
  \center
  \textcolor{argon orange}{Stock}

  Locked-in money
}


\mytext[8.5,4.5][service]{\blockwidth}{anchor = north}{
  \center
  \textcolor{argon orange}{Service}

  Fill rate service level
}


\mytext[$.5*(stock.north)+.5*(service.north)+.87*(0,4)$][cost]{\blockwidth}{anchor = center}{
  \center
  \textcolor{argon orange}{Cost}

  Investment, production, shipping...
}

\draw[argon orange, thick, fill=argon orange!10] (cost.south) -- (stock.north) -- (service.north) -- cycle;


\mytext[$(stock.north)+(.4,.1)$]{\blockwidth}{anchor = south west}{\textcolor{argon gray}{(low)}}
\mytext[$(service.north)+(-.4,.1)$]{\blockwidth}{anchor = south east}{\flushright\textcolor{argon gray}{(high)}}
\mytext[$(cost.south)-(0,.5)$]{\blockwidth}{anchor = north}{\center\textcolor{argon gray}{(low)}}


\mytext[0,1]{\blockwidth}{anchor = south west,
  inner sep = 2pt
}{
  \begin{itemize}
  \item \emph{Industrial agility} = ability to face variations in customers’ demand
    \begin{itemize}
    \item \emph{Capacitative reactivity} (global volume)
    \item \emph{Flexibility} (product mix)
    \end{itemize}
  \item Increase agility (cost $\nearrow$) $\implies$ Stock $\searrow$ and service $\nearrow$
  \end{itemize}
}

\end{myframe}


\begin{myframe}[Business context (3')]

\mytext{\blockwidth}{anchor = north west,
  inner sep = 2pt
}{
  \begin{itemize}
  \item Dessiner frise avec les différents niveaux (stratégique, tactique, opérationnel) et le placement des problèmes
  \end{itemize}
}


\end{myframe}



\begin{frame}[plain]
  \begin{centering}
    \begin{tikzpicture}

      % Windows
      \clip (0,0) rectangle (\paperwidth,\paperheight);

      % Headers
      \node[anchor = west, color = \maincolor] (outline) at (\xlmargin, {\paperheight-.5*\headerheight}) {\textbf{\outline}};

      % Separator from the table of content
      \draw[color=\maincolor] (0,{\paperheight-\headerheight}) -- (\paperwidth,{\paperheight-\headerheight});

      % Table of contents
      \mytext[\xlmargin,{\paperheight-2*\headerheight}]{.5\paperwidth}{anchor = north west, inner sep = 2pt
      }{
        \setcounter{tocdepth}{2}
        \renewcommand{\baselinestretch}{1.}\small
        \tableofcontents
        \renewcommand{\baselinestretch}{1.}\normalsize
      }

      % Separator from the body of the slide
      \draw[color=\secondcolor] (0,\footerheight) -- (\paperwidth,\footerheight);


      % Logo
      \node[anchor = west] at (\xlmargin,{(\footerheight+.1cm)/2}) {\includegraphics[height={\footerheight-.25cm}]{\mylogo}};

      % Rectangle at the bottom
      \draw[color=\maincolor, fill=\maincolor] (0,0) rectangle (\paperwidth,.1cm);

      % Vertical rectangle
      \draw[color=\maincolor, fill=\maincolor] (.55*\paperwidth,0) rectangle (.57*\paperwidth,\paperheight);
      % Image of the theme
      \node[anchor = west] at (.56*\paperwidth,.5*\paperheight) {\includegraphics[height=\paperheight]{\imagetheme}};

    \end{tikzpicture}
  \end{centering}
\end{frame}


% \section{Continuous-time inventory model (4')}



% \begin{myframe}[Continuous-time inventory model]

% \mytext{\blockwidth}{anchor = north west,
%   inner sep = 2pt
% }{
%   \begin{itemize}
%   \item Une slide montrant la formule de Wilson versus la formule d'Argon
%   \end{itemize}
% }


% \end{myframe}



\section{Discrete-time inventory model (20')}


\subsection{Business problem and contribution}


\begin{myframe}[Business problem]

  \mytext{\blockwidth}{anchor = north west,
    inner sep = 2pt
  }{
    \begin{itemize}
    \item Context: production function of the Supply Chain for one assembly line
    \item Objective: reduction of holding costs
    \item Main constraints: industrial flexibility and ``high service level''
    \item Typical horizon: 10 to 15 weeks
    \item Typical time step: 1 week
    \item Input data
        \begin{itemize}
        \item a set of items $i\in\REF$
        \item production capacity $\capacity$ of the line
        \item random demand $\va\demand_t^i$ for each item $i$ and each week $t$
        \end{itemize}
    \end{itemize}
  }

\end{myframe}


\begin{myframe}[Contributions]

  \mytext{\blockwidth}{anchor = north west,
    inner sep = 2pt
  }{
    \begin{itemize}
    \item A new lot-sizing model
    \begin{itemize}
      \item Flexibility constraint
    \end{itemize}
    \item A probabilistic model for demand distribution
    \begin{itemize}
      \item variation of product mix
    \end{itemize}
    \item A method to price backorder costs
    \item A solving method
    \end{itemize}
  }

\end{myframe}


\subsection{Model}


\begin{myframe}[Classical problem: Capacitated Lot-Sizing Problem (CLSP)]

  \mytext[current][CLSP]{\blockwidth}{anchor = north west,
    inner sep = 2pt
  }{
    \only<1>
    {
      \begin{equation}\tag{CLSP}
        \begin{array}{rl@{\qquad}l}
          \min & \multicolumn{2}{l}{\ds \sum_{t=1}^{\horizon} \sum_{i\in\REF}\bracket{\holding^i\inventory_t^i + c^i \setup_t^i}}
          \\
          \st & \ds \inventory_t^i = \inventory_{t-1}^i + \quantity_t^i - \demand_t^i & \forall t, \forall i
          \\
          & \ds \sum_{i\in\REF} \rate^i\quantity_t^i \le \capacity & \forall t
          \\
          & \ds \rate^i\quantity_t^i \le \capacity\setup_t^i\phantom{\Ccancel{\rate^i}} & \forall t, \forall i
          \\
          & \ds \setup_t^i \in \crbracket{0,1} & \forall t, \forall i
          \\
          & \ds \quantity_t^i,\ \inventory_t^i \ge 0 & \forall t, \forall i
        \end{array}
      \end{equation}
    }

    \only<2>
    {
      \begin{equation}\label{eq:CLSP}\tag{CLSP}
        \begin{array}{rl@{\qquad}l}
          \min & \multicolumn{2}{l}{\ds \sum_{t=1}^{\horizon} \sum_{i\in\REF}\bracket{\holding^i\inventory_t^i + c^i \setup_t^i}}
          \\
          \st & \ds \inventory_t^i = \inventory_{t-1}^i + \quantity_t^i - \demand_t^i & \forall t, \forall i
          \\
          & \ds \sum_{i\in\REF} \Ccancel{\rate^i}\quantity_t^i \le \red{1} & \forall t
          \\
          & \ds \Ccancel{\rate^i}\quantity_t^i \le \Ccancel{\capacity}\setup_t^i & \forall t, \forall i
          \\
          & \ds \setup_t^i \in \crbracket{0,1} & \forall t, \forall i
          \\
          & \ds \quantity_t^i,\ \inventory_t^i \ge 0 & \forall t, \forall i
        \end{array}
      \end{equation}
    }
  }

  \mytext[CLSP.west]{\blockwidth}{anchor = west,
    inner sep = 2pt
  }{
    \only<2>{\red{(Normalized)}}
  }

  \mytext[CLSP.south west]{\blockwidth}{anchor = north west,
    inner sep = 2pt
  }{
    \begin{itemize}
    \item with ($i\in\REF$ for items, $t\in\range{T}$ for weeks):
      \begin{center}
        \begin{tabular}{|ll|ll|}
          \hline
          \multicolumn{2}{|c|}{input data} & \multicolumn{2}{c|}{variables} \\\hline
          $\holding^i$ & holding cost & $\inventory_t^i$ & inventory level \\
          $c^i$ & setup cost & $\quantity_t^i$ & produced quantity \\
          $\demand_t^i$ & demand  & $\setup_t^i$ & setup variable \\\hline
        \end{tabular}
      \end{center}
    \end{itemize}
  }

\end{myframe}



\begin{myframe}[Disadvantage of CLSP formulation (\underline{according to Argon Consulting})]

  \mytext{\blockwidth}{anchor = north west,
    inner sep = 2pt
  }{
    \begin{itemize}
    \item Setup costs are hard to compare to holding costs
      \begin{itemize}
      \item Inventory captures locked-in funds, depreciation
      \item Setup costs are linked to workforce, time loss
      \end{itemize}
    \item[]
    \item A bound over the number of setups is easier to get
      \begin{itemize}
      \item Given by operational level
      \item Represents scheduling constraints (which are neglected at tactical level)
      \end{itemize}
    \end{itemize}
  }

\end{myframe}


\begin{myframe}[Multi-item lot-sizing problem with bounded number of setups]

  \mytext{\blockwidth}{anchor = north west,
    inner sep = 2pt
  }{
    \begin{equation}\label{eq:CLSP-BS}\tag{CLSP-BS}
      \begin{array}{rl@{\qquad}l}
        \min & \multicolumn{2}{l}{\ds \sum_{t=1}^{\horizon} \sum_{i\in\REF}\bracket{\holding^i\inventory_t^i+ \Ccancel{c^i \setup_t^i}}}
        \\
        \st & \ds \inventory_t^i = \inventory_{t-1}^i + \quantity_t^i - \demand_t^i & \forall t, \forall i
        \\
        & \ds \sum_{i\in\REF} \quantity_t^i \le 1 & \forall t
        \\
        & \ds \quantity_t^i \le \setup_t^i & \forall t, \forall i
        \\
        & \ds \red{\sum_{i\in\REF} \setup_t^i \le \nbsetups} & \red{\forall t}
        \\
        & \ds \setup_t^i \in \crbracket{0,1} & \forall t, \forall i
        \\
        & \ds \quantity_t^i,\ \inventory_t^i \ge 0 & \forall t, \forall i
      \end{array}
    \end{equation}
  }

  \mytext{\blockwidth}{anchor = north west,
    inner sep = 2pt
  }{
    \begin{itemize}
    \item Bounded number of setups per week ($\nbsetups$)
    \item Easier for industrials to quantify holding costs and $\nbsetups$
    \item This model is new (notable exception: \cite{Rubaszewski2011} have a similar bound on the whole horizon and keep setup costs)
    \end{itemize}
  }
\end{myframe}



\begin{myframe}[Stochastic vision]

  \mytext{\blockwidth}{anchor = north west,
    inner sep = 2pt
  }{
    \begin{itemize}
      \item Dealing with uncertainty
      \begin{itemize}
        \item Stochastic demand
        \item We can set the production levels each week
        \item Objective: find the best production decision for the current week minimizing the expected costs
      \end{itemize}
      \item Need for backorder
      \begin{itemize}
        \item Mathematical reason:
        \begin{itemize}
          \item Simple example:

          - bounded capacity

          - Gaussian noise around demand

          $\implies$ There is no feasible solution
        \end{itemize}
        \item Industrial reason:
        \begin{itemize}
          \item Nonnegative inventories are commercial constraints
          \item Firms can deliver late 
        \end{itemize}
        $\implies$ ``soft'' constraints
      \end{itemize}
    \end{itemize}
  }

  \mytext[$(7.25,5.5)$]{\blockwidth}{anchor = north west,
    inner sep = 2pt
  }{
    \input{images/gaussian_noise_around_demand.tex}
  }

\end{myframe}


\begin{myframe}[Stochastic lot-sizing problem with bounded number of setups]

  \mytext{\blockwidth}{anchor = north west,
    inner sep = 2pt
  }{
    \begin{equation}\label{eq:stochasticPP}\tag{S}
      \begin{array}{rl@{\qquad}l}
        \min & \multicolumn{2}{l}{\ds \esper{\sum_{t=1}^{\horizon} \sum_{i\in\REF} \bracket{\red{\holding^i \va\excess_t^i + \delay^i\va\backlog_t^i}}}}
        \\
        \st & \ds \red{\va\inventory_t^i = \va\excess_t^i - \va\backlog_t^i} & \red{\forall t, \forall i}
        \\
        & \ds \va\inventory_t^i = \va\inventory_{t-1}^i + \va\quantity_t^i - \va\demand_t^i & \forall t, \forall i
        \\
        & \ds \sum_{i\in\REF} \va\quantity_t^i \le 1 & \forall t
        \\
        & \ds \va\quantity_t^i \le \va\setup_t^i & \forall t, \forall i
        \\
        & \ds \sum_{i\in\REF} \va\setup_t^i \le \nbsetups & \forall t
        \\
        & \ds \va\setup_t^i \in \crbracket{0,1} & \forall t, \forall i
        \\
        & \ds \va\quantity_t^i,\ \red{\va\excess_t^i,\ \va\backlog_t^i} \ge 0 & \forall t, \forall i
        \\
        & \ds \red{\va\quantity_t^i\ \mbox{is}\ \Sfield{\bracket{\va\demand_1^i,\ldots,\va\demand_{t-1}^i}_{i\in\REF}}\mbox{--measurable}} & \red{\forall t,\ \forall i.}
      \end{array}
    \end{equation}
  }

  \mytext{\blockwidth}{anchor = north west,
    inner sep = 2pt
  }{
    \begin{center}
      \begin{tabular}{lllll}
        with: & $\delay^i$ & backorder penalization, & $\va\excess_t^i$ & inventory level, \\
         & &  & $\va\backlog_t^i$ & backorder quantity
      \end{tabular}
    \end{center}
  }

\end{myframe}



\subsection{Solving method}



\begin{myframe}[Problem is hard]

  \mytext{\blockwidth}{anchor = north west,
    inner sep = 2pt
  }{
    \begin{itemize}
      \item Deterministic model is hard
      \begin{itemize}
        \item Deterministic model is $\NP$-hard
        \begin{itemize}
          \item Reduce 3-PARTITION for $\nbsetups\ge3$
          \item Deciding if there is a solution when $\nbsetups=1$ is polynomial
          \item Cases $\nbsetups=1$ and $\nbsetups=2$ still open
        \end{itemize}
      \item[]
      \item Continuous relaxation of \ref{eq:CLSP-BS} does NOT depend on $\nbsetups$
      \item[]
      \item 2 natural extended formulations:
        \begin{itemize}
          \item 1 binary variable $x_{pt}$ where $p\in{\REF \choose N}$ per possible plan for a week $t$
          \item 1 binary variable $y_q^i$ where $q\in 2^{\range{\horizon}}$ per possible plan for a item $i$
          \item[\textcolor{black}{$\implies$}] Same continuous relaxations as compact formulation
        \end{itemize}
      \end{itemize}
    \end{itemize}
  }

\end{myframe}


\begin{myframe}[Problem is hard]

  \mytext{\blockwidth}{anchor = north west,
    inner sep = 2pt
  }{
    \begin{itemize}
    \item Stochastic model is bigger than deterministic model
      \begin{itemize}
        \item Exact solving is not yet an option
        \begin{itemize}
          \item Multi-stage with $\horizon\sim15$
          \item Huge number of variables (even uncountable)
          \item We want reasonable computation time
        \end{itemize}
      \item[]
      \item Need for heuristics, \emph{e.g.}
        \begin{itemize}
          \item Argon's heuristic (industrial heuristic)
          \item Deterministic approximation
          \item \red{Two-stage stochastic programming approach}
        \end{itemize}
      \end{itemize}
    \end{itemize}
  }

\end{myframe}


\begin{myframe}[Two-stage stochastic programming approximation (2SA-$m$)]

  \mytext[.75,8.25][observe]{\blockwidth-.9cm}{anchor = north west,
    rectangle, argon gray, thick, draw, fill=argon gray!05
  }{
    \begin{itemize}
      \item Observe current inventory level at $t=t_0$
    \end{itemize}
  }

  \mytext[.75,1][production]{\blockwidth-.9cm}{anchor = south west,
    inner sep = 2pt, rectangle, argon gray, thick, draw, fill=argon gray!05
  }{
    \begin{itemize}
      \item Set production decisions for current week $t=t_0$
      \item Set $t_0=t_0+1$
    \end{itemize}
  }

  \mytext[$.5*(observe.south west)+.5*(production.north west)$][stochastic]{\blockwidth-.9cm}{anchor = west,
    inner sep = 2pt, rectangle, argon gray, thick, draw, fill=argon gray!05
  }{
    \begin{itemize}
      \item Construct a \red{sample of $m$ scenarios of demand to approximate the scenario tree} in stochastic model (see~\cite{Kleywegt2002})
    \end{itemize}

    \vspace{-.6cm}

    \begin{center}\input{images/tree_to_sample.tex}\end{center}
    
    \vspace{-.8cm}

    \begin{itemize}
      \item Solve the stochastic model with only the $m$ scenarios of demand
    \end{itemize}
  }

  \draw[argon gray, thick, -angle 60] (observe.south) -- (stochastic.north);
  \draw[argon gray, thick, -angle 60] (stochastic.south) -- (production.north);
  \draw[argon gray, thick, -angle 60] (production.west) -- ($( .25,0 |- production.west)$) -- ($( .25,0 |- observe.west)$) -- (observe.west);


\end{myframe}



\begin{myframe}[Other heuristics: Argon's heuristic and deterministic approximation]

  \mytext[1pt,8.25][precompute]{.5\blockwidth-6pt}{anchor = north west,
    inner sep = 2pt, rectangle, argon gray, thick, draw, fill=argon gray!05
  }{
    \begin{itemize}
      \item Lot-size
      \begin{itemize}
        \item For each week $t$
        \begin{itemize}
          \item If $\inventory_t^i \le s_{\min}^i$, produce quantity $\ell_i$
        \end{itemize}
      \end{itemize}
    \end{itemize}
  }


  \mytext[1pt,8.25][observe]{\blockwidth-4pt}{anchor = north west,
    rectangle, argon gray, thick, draw, fill=argon gray!05
  }{
    \begin{itemize}
      \item Observe current inventory level at $t=t_0$
    \end{itemize}
  }

  \mytext[1pt,1][production]{\blockwidth-4pt}{anchor = south west,
    inner sep = 2pt, rectangle, argon gray, thick, draw, fill=argon gray!05
  }{
    \begin{itemize}
      \item Set production decisions for current week $t=t_0$
    \end{itemize}
  }


  \mytext[$(observe.west)+(0,.75)$][lot]{.5\blockwidth-6pt}{anchor = south west,
    inner sep = 2pt, rectangle, argon gray, thick, draw, fill=argon gray!05
  }{
    \begin{itemize}
      \item For each item $i$
      \begin{itemize}
        \item Compute safety stock $s_{\min}^i$
        \item Compute lot-size $\ell_i$
      \end{itemize}
    \end{itemize}
  }

  \mytext[$.5*(observe.east)+.5*(production.east)$][deterministic]{.5\blockwidth-6pt}{anchor = east,
    inner sep = 2pt, rectangle, argon gray, thick, draw, fill=argon gray!05
  }{
    \begin{itemize}
      \item Deterministic approximation
      \begin{itemize}
        \item Solve deterministic version of stochastic model where\\\red{the random variable $\va\demand_t^i$ is replaced by the deterministic expected demand}
        \begin{itemize}
          \item It is a Mixed Integer Program
          \item Almost deterministic model\\but with backorder
        \end{itemize}
      \end{itemize}
    \end{itemize}
  }

  \coordinate (upper_row) at ($.5*(deterministic.north)+.5*(observe.south)$);

  \draw[argon gray, thick] (observe.south) -- ($(observe.south |- upper_row)$);
  \draw[argon gray, thick] ($(lot.north |- upper_row)$) -- ($(deterministic.north |- upper_row)$);
  \draw[argon gray, thick, -angle 60] ($(lot.north |- upper_row)$) -- (lot.north);
  \draw[argon gray, thick, -angle 60] ($(deterministic.north |- upper_row)$) -- (deterministic.north);

  \coordinate (lower_row) at ($.5*(deterministic.south)+.5*(production.north)$);

  \draw[argon gray, thick] (lot.south) -- ($(lot.south |- lower_row)$);
  \draw[argon gray, thick] (deterministic.south) -- ($(deterministic.south |- lower_row)$);
  \draw[argon gray, thick] ($(lot.south |- lower_row)$) -- ($(deterministic.south |- lower_row)$);
  \draw[argon gray, thick, -angle 60] ($(production.north |- lower_row)$) -- (production.north);


\end{myframe}




\subsection{Numerical experiments}


\begin{myframe}[Simulations]

  \mytext[.5\paperwidth,8.5]{\paperwidth}{anchor = north,
    inner sep = 2pt
  }{
    \input{images/simulation.tex}
  }


\end{myframe}


\begin{myframe}[Instance characteristics]

  \mytext[current][text]{\blockwidth}{anchor = north west,
    inner sep = 2pt
  }{
    \begin{itemize}
      \item We use historical data provided by the industrial partner
      \item Numerical values (before normalization)
    \end{itemize}
  }

  \mytext[$(text.south)+(0,-.25)$][numerical]{.95\blockwidth}{anchor = north,
    inner sep = 2pt
  }{
    \begin{tabular*}{\linewidth}{@{\extracolsep{\fill}}lrrrrrrr}
    \hline
    Instances &
    \multicolumn{7}{c}{Instance characteristics}
    \\
    \cline{2-8}
    & $\card{\REF}$
    & $\max\bracket{\espe\sqbracket{\va\demand_t^i}}$
    & \multicolumn{1}{c}{$\capacity$}
    & \multicolumn{1}{c}{$\nbsetups$}
    & \multicolumn{1}{c}{$\holding^i$}
    & \multicolumn{1}{c}{$v$}
    & \multicolumn{1}{c}{$\delay^i$}
    \\\hline
    L2\_v20\_85 & $21$ & $4992$ & $10562$ & $7$ & $35$--$61$ & $0.2$ & $11$--$146$
    \\
    L2\_v20\_95 &  &  &  &  &  &  & $34$--$390$
    \\
    L2\_v20\_98 &  &  &  &  &  &  & $35$--$976$
    \\
    L2\_v50\_85 &  &  &  &  &  & $0.5$ & $31$--$168$
    \\
    L2\_v50\_95 &  &  &  &  &  &  & $34$--$1198$
    \\
    L2\_v50\_98 &  &  &  &  &  &  & $36$--$1211$
    \\
    L6\_v20\_98 & $22$ & $8640$ & $13299$ & $8$ & $16$--$23$ & $0.2$ & $15$--$933$
    \\
    L6\_v50\_98 &  &  &  &  &  & $0.5$ & $15$--$1360$
    \\\hline
    \end{tabular*}
  }

  \mytext[numerical.south]{.95\blockwidth}{anchor = north,
    inner sep = 2pt
  }{
    \scriptsize
    \begin{tabular*}{\linewidth}{@{\extracolsep{\fill}}lll}
    $\REF$: set of items &
    $\va\demand_t^i$: demand &
    $\capacity$: line capacity
    \\
    $\nbsetups$: number of setups &
    $\holding^i$: unitary holding cost &
    $v$: volatility
    \\
    $\delay^i$: unitary backorder cost
    \end{tabular*}
  }

\end{myframe}



\begin{myframe}[Probabilistic model]

\mytext[current][text]{\blockwidth}{anchor = north west,
  inner sep = 2pt
}{
  \begin{itemize}
    \item Random demand is generated using Dirichlet distributions and satisfies
    \begin{enumerate}
      \item Demand's expectation is equal to its historical value:
      $\ds\espe\sqbracket{\va\demand_t^i} = \tilde{\demand}_t^i$
      \item Demand's total volume does not depend on the realization:

      \begin{center}
      $\ds\sum_{i,t}\va\demand_t^i = \sum_{i,t}\tilde{\demand}_t^i\quad\as$
      \end{center}
      \item Demand's variance is equal to
      $\ds(\sigma_t^i)^2=\vari\sqbracket{\va\demand_t^i}=\gamma\,\tilde{\demand}_t^i\sum_{\bracket{j,\tau}\ne\bracket{i,t}}\tilde{\demand}_{\tau}^j$
    \end{enumerate}
    \item 2. is motivated by the study of flexibility (mix product variations)
    \item Advantages of Dirichlet distributions
    \begin{itemize}
      \item Easy to simulate
      \item Control on \emph{volatility} $v$ of the random demand
      \begin{itemize}
        \item $\gamma$ is chosen minimizing
        $\ds\norm{\bracket{\frac{\sigma_t^i}{\tilde{\demand}_t^i}}_{t,i}-v\cdot1_{\REF\times\range{\horizon}}}_2$
      \end{itemize}
    \end{itemize}
  \end{itemize}
}

\end{myframe}


\begin{myframe}[Results: objective function (holding and backorder costs)]

  \mytext[current][text]{\blockwidth}{anchor = north west,
    inner sep = 2pt
  }{
    \begin{itemize}
      \item Objective function in M\euro
      \item Mean over 30 runs and confidence interval at $95\%$
      \begin{itemize}
        \item Time limit for each week $=90$s
        \item $m=20$ scenarios
      \end{itemize}
    \end{itemize}
  }

  \mytext[$(text.south)+(0,-.25)$]{.95\blockwidth}{anchor = north,
    inner sep = 2pt
  }{
    \begin{tabular*}{\linewidth}{@{\extracolsep{\fill}}lrrrrr}
    \hline
    Instances
    & \multicolumn{1}{c}{LB}
    & \multicolumn{1}{c}{2SA-$m$}
    & \multicolumn{1}{c}{Det.}
    & \multicolumn{1}{c}{Lot-size}
    \\\hline
    L2\_v20\_85 & $0.64$ &      $ 1.37\pm0.05$  &  $1.45\pm0.06$ &  $8.18\pm0.14$
    \\
    L2\_v20\_95 & $1.02$ &      $ 2.44\pm0.06$  &  $2.56\pm0.07$ & $10.12\pm0.14$
    \\
    L2\_v20\_98 & $1.12$ & \red{$ 3.25\pm0.09$} &  $3.54\pm0.10$ & $11.78\pm0.17$
    \\
    L2\_v50\_85 & $0.99$ &       $2.93\pm0.14$  &  $3.06\pm0.22$ &  $8.56\pm0.24$
    \\
    L2\_v50\_95 & $1.33$ &       $4.54\pm0.25$  &  $5.00\pm0.37$ & $11.40\pm0.39$
    \\
    L2\_v50\_98 & $1.49$ & \red{ $6.12\pm0.44$} &  $7.78\pm0.67$ & $15.62\pm1.06$
    \\
    L6\_v20\_98 & $3.79$ & \red{ $5.61\pm0.07$} &  $5.90\pm0.06$ & $15.39\pm0.12$
    \\
    L6\_v50\_98 & $6.96$ & \red{$12.27\pm0.25$} & $13.05\pm0.20$ & $23.55\pm0.27$
    \\\hline\hline
    \small Computing time & $24$h & $90$s & $\le10$s & $\le1$s
    \\\hline
    \end{tabular*}
  }

\end{myframe}


\begin{myframe}[Compute the lower bound]

  \mytext[0,8.25]{\blockwidth}{anchor = north west,
    inner sep = 2pt
  }{
  \begin{itemize}
    \item We obtain a lower bound solving 2SA-$m$, with m=1000
    \begin{itemize}
      \item (2SA) is a relaxation of stochastic model
      $$V_{2SA} \le V_{\ref{eq:stochasticPP}}$$
      \item The optimal value of (2SA-$m$) converges almost surely to the optimal value of (2SA)
      $$V_{2SA-m} \xrightarrow[m\to\infty]{} V_{2SA}\quad a.s.$$
      and the optimal solutions converge
    \end{itemize}
    \item[]
    \item We could obtain a lower bound solving many time 2SA-$m$ with $m$ small
    \begin{itemize}
      \item $\espe\sqbracket{V_{2SA-m}}\le V_{2SA}\le V_S$
    \end{itemize}
  \end{itemize}
  }

\end{myframe}


\begin{myframe}[Results: holding costs vs. service level]


  \mytext[0,8.25]{.45\blockwidth}{anchor = north west,
    inner sep = 2pt
  }{
    %\begin{figure}[htb]
      \centering
      \input{images/simul_line-2_quarter-1_pastcor-025_volatility-020.tikz}
    %  \caption{Results for the 30 runs of L2 with $v=0.5$ and $\delay=1000$}
    %  \label{fig:cloud-realization}
    %\end{figure}
  }

  \mytext[0,2]{.43\blockwidth}{anchor = north west,
    inner sep = 2pt
  }{
    \begin{itemize}
    \item Results for the 30 runs of L2\_v20\_95
    \end{itemize}
  }


  \mytext[\blockwidth,8.25][3fillrate]{.53\blockwidth}{anchor = north east,
    inner sep = 2pt
  }{
    %\begin{figure}[htb]
      \centering
      \input{images/simul_line-2_quarter-1_pastcor-025_volatility-020_mix-safety.tikz}
    %  \caption{Average results for L2 for various values of desired service level $\servicelvl$ and $v=0.5$}
    %  \label{fig:mean-realization}
    %\end{figure}
  }

  \mytext[5.9,2]{.53\blockwidth}{anchor = north west,
    inner sep = 2pt
  }{
    \begin{itemize}
    \item Average results for L2 for various values of desired service level $\servicelvl$ and $v=0.2$
    \end{itemize}
  }

\end{myframe}



\subsection{Surrogate backorder costs (to remove?)}



\begin{myframe}[Surrogate backorder costs -- Problem]


  \mytext[current][problem]{\blockwidth}{anchor = north west,
    inner sep = 2pt
  }{
    \begin{itemize}
      \item Backorder costs $\delay^i$
      \begin{itemize}
        \item[\textcolor{argon orange}{\textcircled{+}}] Always a feasible solution
        \item[\textcolor{argon gray}{\textcircled{--}}] Sometimes hard to estimate
      \end{itemize}
      \item Fill rate service level constraint
        $$
          \EE\sqbracket{
          \frac{\sum_{i\in\REF}\sum_{t=1}^{\horizon}\min(\va \demand_t^i,\va \quantity_t^i+\va\excess_{t-1}^i)}
          {\sum_{i\in\REF}\va\demand^i}}
          \ge \servicelvl
        $$
      \begin{itemize}
        \item[\textcolor{argon orange}{\textcircled{+}}] Easily expressed by industrial partner
        \item[\textcolor{argon gray}{\textcircled{--}}] Cannot always been satisfied
      \end{itemize}
      \item New problem:
      \begin{itemize}
        \item \red{Find surrogate backorder costs to replace the fill rate service level constraint}
      \end{itemize}
    \end{itemize}
  }

\end{myframe}


\begin{myframe}[Surrogate backorder costs -- Method]


  \mytext{\blockwidth}{anchor = north west,
    inner sep = 2pt
  }{
    \begin{itemize}
      \item We define surrogate backorder cost as follow
      \red{$$\delay^i := \frac{\PP[\va \demand^i\leq q^i(\servicelvl)]}{\PP[\va \demand^i>q^i(\servicelvl)]} \holding^i$$}
      where
      $q^i(\servicelvl) :=  \min \crbracket{q\in \RR_+ \; \Big| \; \esper{\frac{\min(\va\demand^i,q)}{\va\demand^i}}\ge \servicelvl}$
      \item Justification
      \begin{itemize}
        \item Consider the uncapacitated stochastic model with one item and one week
        $$\min_{q\geq 0} \EE \sqbracket{\holding^i (q - \va d^i )^+ + \delay^i ( \va d^i - q)^+}$$
        \begin{itemize}
          \item This is the newsvendor problem
        \end{itemize}
        \item Then, the optimal solution of newsvendor problem have a fill rate service level equal to $\servicelvl$
      \end{itemize}
    \end{itemize}
  }

\end{myframe}


\begin{myframe}[Surrogate backorder costs -- Results]

  \mytext[current][text]{\blockwidth}{anchor = north west,
    inner sep = 2pt
  }{
    \begin{itemize}
      \item Fill rate service level in \%
      \item Mean over 30 runs and confidence interval at $95\%$
      \begin{itemize}
        \item Heuristic 2SA-$m$ is used
        \item Time limit for each week $=90$s
        \item $m=20$ scenarios
      \end{itemize}
    \end{itemize}
  }

  \mytext[$(text.south)+(0,-.25)$]{.95\blockwidth}{anchor = north,
    inner sep = 2pt
  }{
    \begin{tabular*}{\linewidth}{@{\extracolsep{\fill}}lrrrr}
    \cline{2-5}
    & \multicolumn{4}{c}{Fill rate service level}
    \\\hline
    Instance
    & \multicolumn{1}{c}{85\%}
    & \multicolumn{1}{c}{95\%}
    & \multicolumn{1}{c}{99\%}
    & \multicolumn{1}{c}{99.9\%}
    \\\hline
    L2\_v20 & $76.6\pm0.8$ & $81.3\pm0.7$ & $97.8\pm0.3$ & $99.6\pm0.2$
    \\
    L2\_v50 & $78.3\pm1.2$ & $89.9\pm0.7$ & $95.7\pm0.4$ & $95.6\pm0.5$
    \\\hline
    \end{tabular*}
  }

  \mytext[0,3]{\blockwidth}{anchor = north west,
    inner sep = 2pt
  }{
    \begin{itemize}
      \item Method is too optimistic
    \end{itemize}
  }

\end{myframe}


\subsection{Conclusion}


\begin{myframe}[Conclusion]


  \mytext{\blockwidth}{anchor = north west,
    inner sep = 2pt
  }{
    \begin{itemize}
      \item We consider a multi-item lot-sizing problem without setup costs but with a bounded number of setups
      \item We show some complexity results on the deterministic problem
      \item In a stochastic setting, we consider three heuristics compared on a simulator based on industrial data
      \begin{itemize}
        \item Lot-size (industrial) is simple and computing time is less than 1s
        \item Deterministic optimization is 2 times better than lot-size in less than 10s
        \item 2-stage stochastic approximation is 3 times better than lot-size in less than 90s
      \end{itemize}
      \item We propose a method to price the fill rate service level constraint and compute surrogate backorder costs
    \end{itemize}
  }

\end{myframe}



\section{Production Multi-sourcing (15')}


\subsection{Business problem and contribution} 


\begin{myframe}[Business problem: production multi-sourcing]

\mytext[$(current)+(0,.3)$]{\blockwidth}{anchor = north west,
  inner sep = 2pt
}{
  \begin{itemize}
    \item Given:
    \begin{itemize}
      \item Set of plants $\plants$ with bounded capacities, set of items $\REF$
      \item Random demand $\va\demand_t^i$ for each time $t\in\range{\horizon}$ and each item $i\in\REF$
    \end{itemize}
    \item Decisions:
    \begin{itemize}
      \item At time $t=0$, decide for each $i$ which plants can produce $i$ (\emph{flexibility})
      \item These decisions are then set for the whole horizon $\horizon$
    \end{itemize}
    \item Objective: minimize the cost
    \begin{itemize}
      \item Giving plant $p$ ability to produce item $i$ has a cost $\affect_p^i$
    \end{itemize}
    \item Main constraints
    \begin{enumerate}
      \item Capacity of each plant
      \item ``High long term service level''
      \item Worst cases ``not too bad''
    \end{enumerate}
    \item Model must not be too dependent of the industry
    \begin{itemize}
      \item versatility for Argon Consulting
    \end{itemize}
  \end{itemize}
}

\mytext[4.9,2.95]{.6\blockwidth}{anchor = north west,
  inner sep = 2pt
}{
  $\ds\left.\begin{array}{c}\phantom{H}\\\phantom{W}\end{array}\right\}$
  Constraints 2. and 3. are ill-defined!
}

\end{myframe}


\begin{myframe}[Simple example]

\mytext{\blockwidth}{anchor = north west,
  inner sep = 2pt
}{
  \begin{center}
    \input{images/assignment_example.tex}
  \end{center}
}

\end{myframe}



\begin{myframe}[Contributions]

\mytext{\blockwidth}{anchor = north west,
  inner sep = 2pt
}{
  \begin{itemize}
    \item Increasing multi-sourcing to face variability of demand
    \begin{itemize}
      \item Big industrialization costs, temporary production capacity loss, etc.
      \item Is it worth it?
    \end{itemize}
    \item We aim at proposing a model able to answer the following question
    \item[]
  \end{itemize}
}

\quicker{}{}
{
  What is the cheapest multi-sourcing of production

  to achieve a desired ``long term service level''?
}

\mytext{\blockwidth}{anchor = north west,
  inner sep = 2pt
}{
  \begin{itemize}
    \item[]
    \item Contributions
    \begin{itemize}
      \item A model
      \item A method to solve it
      \item Numerical results on real dataset
    \end{itemize}
  \end{itemize}
}

\end{myframe}



\subsection{Model}


\begin{myframe}[Stochastic model]


\mytext[current][model]{.62\blockwidth}{anchor = north west,
  inner sep = 2pt
}{
  \begin{equation*}
    \begin{array}{ll@{\qquad}l}
      \min\quad & \multicolumn{2}{l}{\ds \sum_{i\in\REF}\sum_{p\in\plants}\affect_p^i \open_p^i}
      \\
      \smallskip
      \st\quad & \ds \va\inventory_t^i = \va\inventory_{t-1}^i + \sum_{p\in\plants}\va\quantity_{pt}^i - \va\demand_t^i & \forall t, \forall i
      \\
      \smallskip
      & \ds \sum_{i\in\REF}\rate_{pt}^i\va\quantity_{pt}^i \leq \capacity_p& \forall t, \forall p
      \\
      \smallskip
      & \ds m_p^i \open_p^i \le \rate_{pt}^i\va\quantity_{pt}^i \le M_p^i \open_p^i & \forall t, \forall p, \forall i
      \\
      \smallskip
      & \red{\avar_{1-\servicelvl}\bracket{\va\inventory_t^i} \le 0} & \forall t, \forall i
      \\
      \smallskip
      & \ds \Sfield{\va\quantity_{pt}^i} \subseteq \Sfield{\bracket{\va\demand_{\tau}^i}_{i\in\REF, \tau\in\range{t}}} & \forall t, \forall p, \forall i
      \\
      \smallskip
      & \ds \open_p^i \in \crbracket{0,1} & \forall t, \forall p, \forall i
    \end{array}
  \end{equation*}
}

\mytext[current][servicelvl]{.61\blockwidth}{anchor = north west,
  inner sep = 2pt
}{
  \begin{itemize}
    \item with $\servicelvl$ a parameter to control service level
  \end{itemize}
}

\mytext[model.north east]{.38\blockwidth}{anchor = north west,
  inner sep = 2pt
}{
  \begin{center}
    \begin{tabular}{|ll|}
      \hline
      \multicolumn{2}{|c|}{input data} % &
      \\\hline
      $\affect_p^i$ & assignment cost \\
      $\rate_{pt}^i$ & production rate \\
      $\demand_t^i$ & demand \\
      $\capacity_p$ & plant capacity \\
      $m_p^i$ & minimal production \\
      $M_p^i$ & maximal production
      \\\hline\hline
      \multicolumn{2}{|c|}{variables} \\\hline
      $\open_p^i$ & assignment variable \\
      $\quantity_{pt}^i$ & produced quantity \\
      $\inventory_t^i$ & inventory variable
      \\\hline
    \end{tabular}
  \end{center}
}

\mytext{.38\blockwidth}{anchor = north west,
  inner sep = 2pt
}{
  \begin{itemize}
    \item with
    \begin{itemize}\small
      \item $p\in\plants$ for plants
      \item $i\in\REF$ for items
      \item $t\in\range{T}$ for periods
    \end{itemize}
  \end{itemize}
}


\end{myframe}




\begin{myframe}[Measure of risk -- average value at risk ($\avar$)]

\mytext{\blockwidth}{anchor = north west,
  inner sep = 2pt
}{
  \begin{itemize}
    \item Objective: quantify the risk of a position
    \item Average value at risk $\ds\avar_{\lambda}\bracket{X} = \frac{1}{\lambda}\int_0^{\lambda}-q_{\gamma}^+\bracket{X}\diff\gamma$
    \begin{itemize}
      \item Measures the mean over worst case
      \item If $\avar_{\lambda}\bracket{X} \le 0$, then $\PP\sqbracket{X \ge 0} \ge 1-\lambda$
    \end{itemize}
    \item Example with inventory $\inventory_t^i$
  \end{itemize}
  \begin{center}
    \input{images/avar-example.tex}
  \end{center}
}

\end{myframe}


\begin{myframe}[$\avar$ constraint vs. other constraints]

\mytext{\blockwidth}{anchor = north west,
  inner sep = 2pt
}{
  \begin{center}
    \renewcommand{\arraystretch}{1.5}
    \begin{tabular*}{.97\linewidth}{@{\extracolsep{\fill}}p{4.2cm}cccc@{\extracolsep{\fill}}}
    \hline
    \multicolumn{1}{c}{Properties} & \multicolumn{4}{c}{Constraints} \\
    \cline{2-5}
                                           & $\avar$      & Expectation  & Robust       & Probabilistic \\
    \hline
    Easy writing                           & \bulletminus & \bulletplus  & \bulletminus & \bulletminus \\ 
    Easy linearization                     & \bulletplus  & \bulletplus  & \bulletplus  & \bulletminus \\
    Easy interpretation                    & $\sim$       & \bulletminus & \bulletplus  & \bulletplus  \\
    Control proportion of worst cases      & \bulletplus  & \bulletminus & \bulletminus & \bulletplus  \\
    Control value of worst cases           & \bulletplus  & \bulletminus & \bulletplus  & \bulletminus \\
    Control increase of objective function & \bulletplus  & \bulletminus & \bulletminus & \bulletplus  \\ 
    Few feasibility issues                 & $\sim$       & \bulletplus  & \bulletminus & $\sim$       \\ 
    Computational complexity               & $\sim$       & \bulletplus  & \bulletplus  & \bulletminus \\
    \hline
    \end{tabular*}
    \renewcommand{\arraystretch}{1}
  \end{center}
}

\end{myframe}


\subsection{Solving method}


\begin{myframe}[Linearization of $\avar$ constraint]

\mytext[$(current)+({.025*\blockwidth},0)$]{.94\blockwidth}{anchor = north west,
  inner sep = 2pt
}{
  \begin{center}
    \begin{lem}\label{lem:linearize-AVaR}
    Parameter $\beta\in]0,1[$ and random variable $\va s$ with
    \begin{itemize}
      \item values in finite set $\{s_{\omega}\colon\omega\in\Omega\}$
      \item probability $\{p_{\omega}\colon\omega\in\Omega\}$
    \end{itemize}

    Then $\avar_{1-\beta}\bracket{\va s} \le 0$ holds \emph{iff} the following polyhedron is non empty
    $$
    \left\{
    \bracket{\alpha,m}\in\RR_+^{\Omega}\times\RR\;\Bigg|\;
    \alpha_{\omega}\geq m-s_{\omega},\;\forall\omega\in\Omega
    \mbox{ and }
    \frac{1}{\card{\Omega}}\sum_{\omega'\in\Omega}p_{\omega'}\alpha_{\omega'}\leq (1-\beta)m
    \right\}
    $$
    \end{lem}
  \end{center}
}

\mytext[0,2.8]{\blockwidth}{anchor = north west,
  inner sep = 2pt
}{
  \begin{itemize}
    \item Proof is based on the rewriting of $\avar$ by \cite{Rockafellar2002}
    $$\ds\avar_{\lambda}\bracket{\va s} = \frac{1}{\lambda} \inf_{m\in\RR}\bracket{\esper{\bracket{m-\va s}^+}-\lambda m}$$
  \end{itemize}
}

\end{myframe}


\begin{myframe}[Solving method]


\mytext{\blockwidth}{anchor = north west,
  inner sep = 2pt
}{
  \begin{itemize}
    \item 2-stage approximation
    \begin{itemize}
      \item 1st stage variables: assigning the ability to produce
      \item 2nd stage variables: production variable (demand is now observed)
    \end{itemize}
    \item Sampling
    \begin{itemize}
      \item Generate a sample of $m$ scenarios to approximate the distribution of the $\va\demand_t^i$
    \end{itemize}
    \item Linearization of $\avar$ constraint
    \item []
    \item We get a mixed integer program solved by
    \begin{itemize}
      \item LP solver (small dataset)
      \item Heuristic (big dataset)
    \end{itemize}
  \end{itemize}
}

\end{myframe}



\begin{myframe}[Heuristic to find feasible solution]

\quicker{}{}{
  Idea: solve a deterministic version with a bigger demand to face randomness
}


\mytext[current][heuristic]{\blockwidth}{anchor = north west,
  inner sep = 2pt
}{
  \begin{itemize}
    \item[]
    \item Binary search algorithm to find the \textcolor{\maincolor}{smallest $\alpha$} such that \hfill \textcolor{\secondcolor}{(\emph{$N$ iterations})}
    \begin{itemize}
      \item Demand is uniformly scaled by $\alpha \geq 1$
      \item[]
      \item Deterministic version of the model is feasible
      \begin{itemize}
        \item $\avar\bracket{\va\inventory_t^i}$ becomes $\inventory_t^i\ge0$
        \item Get the best item assignment $\bracket{\open_p^i}_{p,i}$ \hfill \textcolor{\secondcolor}{(\emph{time limit = $\tau$})}
      \end{itemize}
      \item[]
      \item MIP previously obtained is feasible with assignment $\bracket{\open_p^i}_{p,i}$
      \begin{itemize}
        \item Only continuous variables $\inventory_{t,\omega}^i$ and $\quantity_{t,\omega}^i$ are recomputed ($\omega$ for scenario)
      \end{itemize}
    \end{itemize}
    \item[]
    \item Return item assignment $\bracket{\open_p^i}_{p,i}$
  \end{itemize}
}


\end{myframe}





\subsection{Numerical experiments}



\begin{myframe}[Data of the instance]

\mytext[current][text]{\blockwidth}{anchor = north west,
  inner sep = 2pt
}{
  \begin{itemize}
    \item We use historical data provided by the industrial partner
    \item Numerical values
  \end{itemize}
}

\mytext[$(text.south)+(0,-.25)$][numerical]{.95\blockwidth}{anchor = north,
  inner sep = 2pt
}{
  \begin{tabular*}{\linewidth}{@{\extracolsep{\fill}}llr@{\extracolsep{\fill}}c@{\extracolsep{\fill}}rr@{\extracolsep{\fill}}c@{\extracolsep{\fill}}r@{\extracolsep{\fill}}}
  \hline
  \multicolumn{2}{c}{Instances characteristics} & \multicolumn{6}{c}{Instances}
  \\
  \cline{3-8}
  && \multicolumn{3}{c}{Mel} & \multicolumn{3}{c}{Lux}
  \\
  \hline
  Number of plants & $\card{\plants}$ &&& $4$ &&& $27$
  \\
  Number of items & $\card{\REF}$ &&& $11$ &&& $100$
  \\
  Number of time steps & $\horizon$ &&& $3$ &&& $6$
  \\
  Historical demand & $\tilde{\demand}_t^i$ & $4884$ &--& $19959$ & $0$ &--& $16996$
  \\
  Capacity of plants & $\capacity_p$ & $6156$ &--& $28969$ & $2213$ &--& $43416$ 
  \\
  Capacity for an item & $M_p^i$ & $1539$ &--& $7242$ & $721$ &--& $12753$ 
  \\
  Internal production time & $\rate_{pt}^i$ & $0.4$ &--& $1.1$ & $0.4$ &--& $9.0$
  \\
  Assignment cost & $\affect_p^i$ & $8392$ &--& $82196$ & $3516$ &--& $62234$ 
  \\
  \hline
  \end{tabular*}
}


\end{myframe}



\begin{myframe}[Parameters for solving]

\mytext[current][text]{\blockwidth}{anchor = north west,
  inner sep = 2pt
}{
  \begin{itemize}
    \item Method parameters
    \begin{itemize}
      \item $m=100$ scenarios
      \item Global time limit $=1200s$
      \item Heuristic parameters
      \begin{itemize}
        \item $N=10$ iterations in binary search 
        \item Iteration time limit $\tau=120s$
      \end{itemize}
    \end{itemize}
    \item Computer characteristics
    \begin{itemize}
      \item Processor: 32 x Intel Xeon E5-2667, 3.30GHz (hyperthreading)
      \item RAM: 192 Go 
     \end{itemize}
    \item Linear solver
    \begin{itemize}
      \item Gurobi Optimization 6.5.1
    \end{itemize}
  \end{itemize}
}


\end{myframe}



\begin{myframe}[Results for Mel instances (without heuristic)]


\mytext[$(current)+({.505*\blockwidth},0)$]{.99\blockwidth}{anchor = north,
  inner sep = 2pt
}{
  \footnotesize
  \begin{tabular*}{\linewidth}{@{\extracolsep{\fill}}c|>{\raggedleft\arraybackslash}p{.7cm}|>{\raggedleft\arraybackslash}p{.7cm}|>{\raggedleft\arraybackslash}p{.7cm}|>{\raggedleft\arraybackslash}p{.7cm}|>{\raggedleft\arraybackslash}p{.7cm}|>{\raggedleft\arraybackslash}p{.7cm}|l@{\extracolsep{\fill}}}
  $\beta$ & \multicolumn{6}{c|}{Volatility} & \multicolumn{1}{c}{Output}
  \\
  & \multicolumn{1}{c|}{1\%} & \multicolumn{1}{c|}{5\%} & \multicolumn{1}{c|}{10\%} & \multicolumn{1}{c|}{30\%} & \multicolumn{1}{c|}{50\%} & \multicolumn{1}{c|}{80\%} & 
  \\ \hline
  70\% & 953 & 967 & 1011 & 1034 & 1134 & 1381 & Solver best value \hfill {\scriptsize($\times10^3$)}
  \\
       & 93.8 & 93.5 & 93.3 & 91.2 & 90.1 & 91.4 & $\proba{stock\ge0}$$^1$ \hfill {\scriptsize(in \%)}
  \\
       & 99.7 & 100.0 & 100.0 & 98.7 & 97.5 & 97.5 & Cycle service level$^2$ \hfill {\scriptsize(in \%)}
  \\
       & 100.0 & 100.0 & 100.0 & 99.7 & 99.2 & 98.8 & Fill rate service level$^2$ \hfill {\scriptsize(in \%)}
  \\ \hline
  85\% & 957 & 957 & 1000 & 1087 & 1188 & \multicolumn{1}{c|}{$\infty$} & Solver best value \hfill {\scriptsize($\times10^3$)}
  \\ \cdashline{2-8}[2pt/2pt]
       & 17.5 & 15.0 & 18.1 & 17.7 & 11.3 & \multicolumn{1}{c|}{--} & GAP (best known bound) \hfill {\scriptsize(in \%)}
  \\
       & 790 & 813 & 819 & 895 & 1054 & \multicolumn{1}{c|}{--} & Solver lower bound \hfill {\scriptsize($\times10^3$)}
  \\
       & 1200 & 1200 & 1200 & 1200 & 1200 & \multicolumn{1}{c|}{--} & Time for bound \hfill {\scriptsize(in s)}
  \\ \cdashline{2-8}[2pt/2pt]
       & 98.5 & 98.1 & 97.6 & 96.5 & 95.9 & \multicolumn{1}{c|}{--} & $\proba{stock\ge0}$$^1$ \hfill {\scriptsize(in \%)}
  \\
       & 100.0 & 100.0 & 100.0 & 99.4 & 98.6 & \multicolumn{1}{c|}{--} & Cycle service level$^2$ \hfill {\scriptsize(in \%)}
  \\
       & 100.0 & 100.0 & 100.0 & 99.9 & 99.6 & \multicolumn{1}{c|}{--} & Fill rate service level$^2$ \hfill {\scriptsize(in \%)}
  \\ \hline
  95\% & 954 & 956 & 997 & 1173 & 1371 & \multicolumn{1}{c|}{$\infty$} & Solver best value \hfill {\scriptsize($\times10^3$)}
  \\
       & 99.6 & 99.6 & 99.3 & 99.0 & 99.0 & \multicolumn{1}{c|}{--} & $\proba{stock\ge0}$$^1$ \hfill {\scriptsize(in \%)}
  \\
       & 100.0 & 100.0 & 99.8 & 99.8 & 99.6 & \multicolumn{1}{c|}{--} & Cycle service level$^2$ \hfill {\scriptsize(in \%)}
  \\
       & 100.0 & 100.0 & 100.0 & 100.0 & 99.9 & \multicolumn{1}{c|}{--} & Fill rate service level$^2$ \hfill {\scriptsize(in \%)}
  \\ \hline
  \end{tabular*}
  \scriptsize
  $^1$In-sample probability of keeping positive stock

  $^2$Out-of-sample evaluation of service levels
}


\end{myframe}


\begin{myframe}[Results for Mel instances (with heuristic)]


\mytext[$(current)+({.505*\blockwidth},0)$]{.99\blockwidth}{anchor = north,
  inner sep = 2pt
}{
  \footnotesize
  \begin{tabular*}{\linewidth}{@{\extracolsep{\fill}}c|>{\raggedleft\arraybackslash}p{.7cm}|>{\raggedleft\arraybackslash}p{.7cm}|>{\raggedleft\arraybackslash}p{.7cm}|>{\raggedleft\arraybackslash}p{.7cm}|>{\raggedleft\arraybackslash}p{.7cm}|>{\raggedleft\arraybackslash}p{.7cm}|l@{\extracolsep{\fill}}}
  $\beta$ & \multicolumn{6}{c|}{Volatility} & \multicolumn{1}{c}{Output}
  \\
  & \multicolumn{1}{c|}{1\%} & \multicolumn{1}{c|}{5\%} & \multicolumn{1}{c|}{10\%} & \multicolumn{1}{c|}{30\%} & \multicolumn{1}{c|}{50\%} & \multicolumn{1}{c|}{80\%} & 
  \\ \hline
  70\% & 1152 & 1176 & 1156 & 1136 & 1541 & 1640 & Heuristic value \hfill {\scriptsize($\times10^3$)}
  \\
       & 95.5 & 93.8 & 92.7 & 89.7 & 88.8 & 90.1 & $\proba{stock\ge0}$$^1$ \hfill {\scriptsize(in \%)}
  \\
       & 100.0 & 100.0 & 100.0 & 99.8 & 99.8 & 99.3 & Cycle service level$^2$ \hfill {\scriptsize(in \%)}
  \\
       & 100.0 & 100.0 & 100.0 & 99.0 & 99.3 & 98.5 & Fill rate service level$^2$ \hfill {\scriptsize(in \%)}
  \\ \hline
  85\% & 1152 & 1134 & 1146 & 1112 & 1230 & \multicolumn{1}{c|}{$\infty$} & Heuristic value \hfill {\scriptsize($\times10^3$)}
  \\ \cdashline{2-8}[2pt/2pt]
       & 31.4 & 28.3 & 28.5 & 19.5 & 14.3 & \multicolumn{1}{c|}{--} & GAP (best known bound) \hfill {\scriptsize(in \%)}
  \\
       & 673 & 707 & 686 & 797 & 900 & 1144 & Continuous relaxation \hfill {\scriptsize($\times10^3$)}
  \\
       & 3.8 & 13.8 & 3.5 & 2.4 & 13.7 & 3.6 & Time for bound \hfill {\scriptsize(in s)}
  \\ \cdashline{2-8}[2pt/2pt]
       & 97.7 & 97.2 & 96.6 & 96.2 & 95.7 & \multicolumn{1}{c|}{--} & $\proba{stock\ge0}$$^1$ \hfill {\scriptsize(in \%)}
  \\
       & 100.0 & 100.0 & 100.0 & 99.9 & 99.6 & \multicolumn{1}{c|}{--} & Cycle service level$^2$ \hfill {\scriptsize(in \%)}
  \\
       & 100.0 & 100.0 & 100.0 & 99.5 & 98.7 & \multicolumn{1}{c|}{--} & Fill rate service level$^2$ \hfill {\scriptsize(in \%)}
  \\ \hline
  95\% & 1152 & 968 & 1021 & 1210 & 1396 & \multicolumn{1}{c|}{$\infty$} & Heuristic value \hfill {\scriptsize($\times10^3$)}
  \\
       & 99.2 & 99.8 & 99.8 & 99.0 & 99.1 & \multicolumn{1}{c|}{--} & $\proba{stock\ge0}$$^1$ \hfill {\scriptsize(in \%)}
  \\
       & 100.0 & 100.0 & 100.0 & 100.0 & 99.9 & \multicolumn{1}{c|}{--} & Cycle service level$^2$ \hfill {\scriptsize(in \%)}
  \\
       & 100.0 & 100.0 & 100.0 & 99.8 & 99.6 & \multicolumn{1}{c|}{--} & Fill rate service level$^2$ \hfill {\scriptsize(in \%)}
  \\ \hline
  \end{tabular*}
  \scriptsize
  $^1$In-sample probability of keeping positive stock

  $^2$Out-of-sample evaluation of service levels
}

\end{myframe}


\begin{myframe}[Results for Lux instances (with heuristic)]


\mytext[$(current)+({.505*\blockwidth},0)$]{.99\blockwidth}{anchor = north,
  inner sep = 2pt
}{
  \footnotesize
  \begin{tabular*}{\linewidth}{@{\extracolsep{\fill}}c|>{\raggedleft\arraybackslash}p{.7cm}|>{\raggedleft\arraybackslash}p{.7cm}|>{\raggedleft\arraybackslash}p{.7cm}|>{\raggedleft\arraybackslash}p{.7cm}|>{\raggedleft\arraybackslash}p{.7cm}|>{\raggedleft\arraybackslash}p{.7cm}|l@{\extracolsep{\fill}}}
  $\beta$ & \multicolumn{6}{c|}{Volatility} & \multicolumn{1}{c}{Output}
  \\
  & \multicolumn{1}{c|}{1\%} & \multicolumn{1}{c|}{5\%} & \multicolumn{1}{c|}{10\%} & \multicolumn{1}{c|}{30\%} & \multicolumn{1}{c|}{50\%} & \multicolumn{1}{c|}{80\%} & 
  \\ \hline
  70\% & 1392 & 1409 & 1420 & 1476 & 1624 & 1861 & Heuristic value \hfill {\scriptsize($\times10^3$)}
  \\
       & 99.4 & 99.3 & 99.2 & 98.7 & 98.6 & 98.5 & $\proba{stock\ge0}$$^1$ \hfill {\scriptsize(in \%)}
  \\
       & 80.2 & 80.4 & 80.6 & 81.1 & 81.3 & 82.0 & Cycle service level$^2$ \hfill {\scriptsize(in \%)}
  \\
       & 87.2 & 87.1 & 86.8 & 86.5 & 88.0 & 87.3 & Fill rate service level$^2$ \hfill {\scriptsize(in \%)}
  \\ \hline
  85\% & 1392 & 1409 & 1407 & 1516 & 1708 & 1997 & Heuristic value \hfill {\scriptsize($\times10^3$)}
  \\ \cdashline{2-8}[2pt/2pt]
       & \multicolumn{1}{c|}{--} & 24.1 & 22.3 & 24.7 & \multicolumn{1}{c|}{--} & \multicolumn{1}{c|}{--} & GAP (best known bound) \hfill {\scriptsize(in \%)}
  \\
       & \multicolumn{1}{c|}{--} & 1070 & 1084 & 1142 & \multicolumn{1}{c|}{--} & \multicolumn{1}{c|}{--} & Continuous relaxation \hfill {\scriptsize($\times10^3$)}
  \\
       & 86400 & 28728 & 31277 & 51399 & 86400 & 86400 & Time for bound \hfill {\scriptsize(in s)}
  \\ \cdashline{2-8}[2pt/2pt]
       & 99.9 & 99.8 & 99.8 & 99.6 & 99.5 & 99.4 & $\proba{stock\ge0}$$^1$ \hfill {\scriptsize(in \%)}
  \\
       & 80.2 & 80.4 & 80.6 & 81.1 & 82.0 & 81.1 & Cycle service level$^2$ \hfill {\scriptsize(in \%)}
  \\
       & 87.2 & 87.0 & 86.3 & 87.8 & 87.2 & 87.6 & Fill rate service level$^2$ \hfill {\scriptsize(in \%)}
  \\ \hline
  95\% & 1392 & 1420 & 1421 & 1624 & 1900 & 2382 & Heuristic value \hfill {\scriptsize($\times10^3$)}
  \\
       & 100.0 & 100.0 & 99.9 & 99.9 & 99.9 & 99.9 & $\proba{stock\ge0}$$^1$ \hfill {\scriptsize(in \%)}
  \\
       & 80.2 & 80.7 & 80.8 & 81.3 & 81.8 & 81.9 & Cycle service level$^2$ \hfill {\scriptsize(in \%)}
  \\
       & 87.2 & 86.7 & 88.0 & 88.3 & 88.2 & 87.5 & Fill rate service level$^2$ \hfill {\scriptsize(in \%)}
  \\ \hline
  \end{tabular*}
  \scriptsize
  $^1$In-sample probability of keeping positive stock

  $^2$Out-of-sample evaluation of service levels
}


\end{myframe}



\begin{myframe}[Conclusion and bibliography]

\mytext[current][bibliography]{\blockwidth}{anchor = north west,
  inner sep = 2pt
}{
  \begin{itemize}
    \item We model a supply-chain optimization problem
    \begin{itemize}
      \item We propose a risk constraint to deal with service level
      \item We propose a method to solve it leading to a MIP formulation
    \end{itemize}
    \item Future works
    \begin{itemize}
      \item Decomposition methods (Bender, L-Shaped) to solve the MIP
      \item Selecting a small representative set of scenarios to reduce MIP size
    \end{itemize}
  \end{itemize}


  % La bibliographie
  \bibliographystyle{apalike}
  \bibliography{template_diapo}
}

\mytext[$.5*(bibliography.south)+.5*(bibliography.south |- 0.,\footerheight)$]{\blockwidth}{anchor = center,
  inner sep = 2pt
}{
  \begin{center}
    {\huge Thanks for your attention!}
  \end{center}
}

\end{myframe}




% \appendix



% \section{Measure of risk}



% \begin{myframe}[Measures of risk]


% \mytext{\blockwidth}{anchor = north west,
%   inner sep = 2pt
% }{
%   \begin{itemize}
%     \item Objective: quantify the risk of a position
%     \item Example: value at risk ($\var$)
%     \begin{itemize}
%       \item $\ds \var_{\lambda}\bracket{X} = -q_{\lambda}^+\bracket{X} = \inf\crbracket{m\in\RR\left|\proba{X+m<0}\le\lambda\right.}$
%     \end{itemize}
%   \end{itemize}
% }

% \mytext{\blockwidth}{anchor = north west,
%   inner sep = 2pt
% }{
%   \begin{center}
%     \input{images/value-at-risk.tex}
%   \end{center}
% }

% \mytext{\blockwidth}{anchor = north west,
%   inner sep = 2pt
% }{
%   \begin{itemize}
%     \item[]
%     \begin{itemize}
%       \item[\textcolor{argon orange}{\textcircled{+}}] Control of the proportion of the good cases
%       \item[\textcolor{argon gray}{\textcircled{--}}] Computational complexity, lack of control on worst cases
%     \end{itemize}
%   \end{itemize}
% }

% \end{myframe}



% \begin{myframe}[Measures of risk]


% \mytext{\blockwidth}{anchor = north west,
%   inner sep = 2pt
% }{
%   \begin{itemize}
%     \item Example: average value at risk ($\var$)
%     \begin{itemize}
%       \item $\ds \avar_{\lambda}\bracket{X} = \frac{1}{\lambda}\int_0^{\lambda}\var_{\gamma}\bracket{X}\diff\gamma$
%     \end{itemize}
%   \end{itemize}
% }

% \mytext{\blockwidth}{anchor = north west,
%   inner sep = 2pt
% }{
%   \begin{center}
%     \input{images/average-value-at-risk.tex}
%   \end{center}
% }

% \mytext{\blockwidth}{anchor = north west,
%   inner sep = 2pt
% }{
%   \begin{itemize}
%     \item[]
%     \begin{itemize}
%       \item Limit cases
%       \begin{itemize}
%         \item $\lambda \longrightarrow 1$ : expectation constraint
%         \item $\lambda \longrightarrow 0$ : robust constraint
%       \end{itemize}
%       \item[\textcolor{argon orange}{\textcircled{+}}] Convex, better control on worst cases, can be linearized
%     \end{itemize}
%   \end{itemize}
% }

% \end{myframe}



% \begin{myframe}[Using $\avar$ to control inventory]


% \mytext{\blockwidth}{anchor = north west,
%   inner sep = 2pt
% }{
%   \begin{itemize}
%     \item Constraint $\red{\avar_{1-\servicelvl}\bracket{\va\inventory_t^i} \le 0}$ for each item $i$ and each time step $t$

%     with $\va\inventory$ the inventory level and $\servicelvl$ a parameter to control service level
%   \end{itemize}
% }

% \mytext{\blockwidth}{anchor = north west,
%   inner sep = 2pt
% }{
%   \begin{center}
%     \input{images/avar-constraint.tex}
%   \end{center}
% }

% \end{myframe}




\end{document}